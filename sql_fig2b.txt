From GUI user entered values : u_HIscore, u_zip, u_name, u_cuisine

This gets the date of last inspection for each restaurant

create view fig2b_lastinspec_date as 
select  R.rid as rid,  max(insp.idate) as lastinspecdate 
from restaurant as R , inspection as insp
where R.rid = insp.rid
group by rid


select R.name, R.rid, concat(R.street, ', ', R.city, ', ' , R.state, ', ',R.zipcode) as R_address, R.cuisine as cuisine, insp.totalscore , insp.idate
from restaurant as R, inspection as insp, fig2b_lastinspec_date

where R.rid = insp.rid and fig2b_lastinspec_date.lastinspecdate = insp.idate
 and R.zipcode like '303%'
and R.cuisine  like '%American%' and R.name like '%d%'
order by totalscore desc

